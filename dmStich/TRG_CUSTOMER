CREATE OR REPLACE TRIGGER TRG_CUSTOMER
BEFORE INSERT OR UPDATE ON CUSTOMER
FOR EACH ROW
DECLARE
BEGIN
  IF (:NEW.CREDITS < 0) THEN
    RAISE_APPLICATION_ERROR (-20999, 'THE CREDITS ' || :NEW.CREDITS ||
                            ' HAS TO BE GREATER OR EQUAL TO 0');
  END IF;
  
  IF (:NEW.BIRTHDATE > SYSDATE) THEN
    RAISE_APPLICATION_ERROR (-20998, 'THE BIRTHDATE ' || :NEW.BIRTHDATE ||
                            ' MUST BE BELOW THE CURRENT DATE');
  END IF;
  
  IF (:NEW.EMAIL NOT LIKE '^[A-Za-z0-9]+@[A-Za-z0-9]+.[A-Za-z0-9]+$') THEN
    RAISE_APPLICATION_ERROR (-20666, 'NICE TRY MOFO, ENTER VALID EMAIL!');
  END IF;
  
  IF (UPDATING) THEN
    :NEW.BIRTHDATE := :OLD.BIRTHDATE;
  END IF;
END TRG_CUSTOMER;